# üìö B√†i 1: Node.js Basics

## üéØ M·ª•c Ti√™u H·ªçc T·∫≠p

Sau khi ho√†n th√†nh b√†i h·ªçc n√†y, b·∫°n s·∫Ω:
- Hi·ªÉu Node.js l√† g√¨ v√† t·∫°i sao s·ª≠ d·ª•ng
- N·∫Øm ƒë∆∞·ª£c c√°ch ho·∫°t ƒë·ªông c·ªßa V8 Engine v√† Event Loop
- S·ª≠ d·ª•ng ƒë∆∞·ª£c c√°c Global Objects c∆° b·∫£n
- Hi·ªÉu v√† √°p d·ª•ng Callback Pattern

## ‚ùì C√¢u H·ªèi Tr·ªçng T√¢m

Sau khi h·ªçc xong b√†i n√†y, b·∫°n ph·∫£i tr·∫£ l·ªùi ƒë∆∞·ª£c:

üîç **C√¢u h·ªèi c∆° b·∫£n:**


1. Node.js kh√°c g√¨ v·ªõi JavaScript ch·∫°y tr√™n browser?
- Kh√°c v·ªÅ m√¥i tr∆∞·ªùng (nodejs ch·∫°y tr√™n server c√≤n js ch·∫°y tr√™n browser ·ªü client).
- C√≥ c√°c api h·ªó tr·ª£ kh√°c nhau.
- Kh√°c nhau v·ªÅ m·ª•c ƒë√≠ch s·ª≠ d·ª•ng.
2. T·∫°i sao Node.js ƒë∆∞·ª£c g·ªçi l√† "non-blocking I/O"?
- X·ª≠ l√Ω c√°c t√°c v·ª• i/o(ƒë·ªçc file truy v·∫•n csdl, call api) theo ki·ªÉu b·∫•t ƒë·ªìng b·ªô(asynchronous)
- Thay v√¨ ch·ªù m·ªôt t√°c v·ª• ho√†n th√†nh m·ªõi ti·∫øp t·ª•c, Node.js s·ª≠ d·ª•ng callback, Promise, ho·∫∑c async/await ƒë·ªÉ x·ª≠ l√Ω sau khi I/O ho√†n t·∫•t.
- Nh·ªù ƒë√≥, event loop c·ªßa Node.js v·∫´n ti·∫øp t·ª•c x·ª≠ l√Ω c√°c y√™u c·∫ßu kh√°c m√† kh√¥ng b·ªã ch·∫∑n.


üëâ ƒêi·ªÅu n√†y gi√∫p Node.js hi·ªáu qu·∫£ v√† nhanh khi x·ª≠ l√Ω nhi·ªÅu k·∫øt n·ªëi c√πng l√∫c.


3. Event Loop ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o?
- Call Stack: N∆°i ch·ª©a c√°c h√†m ƒëang ƒë∆∞·ª£c th·ª±c thi.
- Callback Queue: N∆°i ch·ª©a c√°c h√†m callback ch·ªù ƒë∆∞·ª£c x·ª≠ l√Ω (v√≠ d·ª•: t·ª´ I/O, setTimeout...).
- Event Loop li√™n t·ª•c ki·ªÉm tra n·∫øu Call Stack r·ªóng th√¨ s·∫Ω ƒë∆∞a callback t·ª´ Queue v√†o Stack ƒë·ªÉ th·ª±c thi.

üîç **C√¢u h·ªèi n√¢ng cao:**
1. Callback Pattern gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ g√¨?
- Callback pattern gi√∫p x·ª≠ l√Ω t√°c v·ª• b·∫•t ƒë·ªìng b·ªô m√† kh√¥ng ch·∫∑n ch∆∞∆°ng tr√¨nh. Thay v√¨ ch·ªù k·∫øt qu·∫£, n√≥ d√πng h√†m callback ƒë·ªÉ x·ª≠ l√Ω sau khi ho√†n th√†nh. Nh∆∞·ª£c ƒëi·ªÉm: d·ªÖ g√¢y callback hell n·∫øu l·ªìng nhi·ªÅu.
2. Khi n√†o n√™n s·ª≠ d·ª•ng `process.nextTick()`?
- N√™n d√πng process.nextTick() khi b·∫°n mu·ªën tr√¨ ho√£n vi·ªác th·ª±c thi m·ªôt h√†m ƒë·∫øn ngay sau khi v√≤ng l·∫∑p hi·ªán t·∫°i (event loop) k·∫øt th√∫c, nh∆∞ng tr∆∞·ªõc khi c√°c t√°c v·ª• async kh√°c (nh∆∞ setTimeout, I/O...) ch·∫°y.
3. T·∫°i sao Node.js ph√π h·ª£p cho vi·ªác x√¢y d·ª±ng API?
- X·ª≠ l√Ω b·∫•t ƒë·ªìng b·ªô (Non-blocking I/O, Cho ph√©p x·ª≠ l√Ω h√†ng ng√†n request ƒë·ªìng th·ªùi m√† kh√¥ng ch·∫∑n lu·ªìng ch√≠nh, Ph√π h·ª£p v·ªõi c√°c API c·∫ßn ƒë·ªçc/ghi CSDL, g·ªçi d·ªãch v·ª• ngo√†i (I/O nhi·ªÅu)) 
- Hi·ªáu su·∫•t cao v·ªõi Event Loop (M√¥ h√¨nh event-driven gi√∫p x·ª≠ l√Ω nhi·ªÅu k·∫øt n·ªëi m·ªôt c√°ch nh·∫π v√† hi·ªáu qu·∫£, ƒë·∫∑c bi·ªát l√† RESTful API ho·∫∑c WebSocket.)
- D·ªÖ ph√°t tri·ªÉn v·ªõi JavaScript
- H·ªá sinh th√°i m·∫°nh (npm)
- D·ªÖ m·ªü r·ªông theo chi·ªÅu ngang (Ph√π h·ª£p v·ªõi ki·∫øn tr√∫c microservices ho·∫∑c serverless (chia nh·ªè API theo ch·ª©c nƒÉng))

üîç **C√¢u h·ªèi th·ª±c h√†nh:**
1. L√†m th·∫ø n√†o ƒë·ªÉ x·ª≠ l√Ω command line arguments?
- D√πng process.argv ƒë·ªÉ ƒë·ªçc ƒë·ªëi s·ªë, ho·∫∑c th∆∞ vi·ªán nh∆∞ minimist ƒë·ªÉ parse d·ªÖ h∆°n.
2. C√°ch l·∫Øng nghe v√† x·ª≠ l√Ω system events?
- process object ‚Äì D√πng ƒë·ªÉ l·∫Øng nghe c√°c s·ª± ki·ªán h·ªá th·ªëng
- EventEmitter ‚Äì T·ª± t·∫°o v√† l·∫Øng nghe custom events (n·ªôi b·ªô app)
3. Ph√°p bi·ªát gi·ªØa `setTimeout` v√† `setImmediate`?
- setTimeout(fn, 0) ch·∫°y sau √≠t nh·∫•t 0ms, sau khi c√°c phase kh√°c c·ªßa event loop xong.
- setImmediate(fn) ch·∫°y ngay ·ªü phase check ti·∫øp theo, th∆∞·ªùng nhanh h∆°n setTimeout(0).
- setImmediate ∆∞u ti√™n h∆°n v√† ch·∫°y s·ªõm h∆°n setTimeout(0).

## üìñ L√Ω Thuy·∫øt

### 1. Node.js l√† g√¨?

Node.js l√† m·ªôt JavaScript runtime ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n V8 JavaScript engine c·ªßa Chrome. N√≥ cho ph√©p ch·∫°y JavaScript b√™n ngo√†i tr√¨nh duy·ªát, ch·ªß y·∫øu ƒë·ªÉ x√¢y d·ª±ng c√°c ·ª©ng d·ª•ng server-side.

**ƒê·∫∑c ƒëi·ªÉm ch√≠nh:**
- **Non-blocking I/O**: Kh√¥ng b·ªã ch·∫∑n khi th·ª±c hi·ªán c√°c t√°c v·ª• I/O
- **Event-driven**: D·ª±a tr√™n s·ª± ki·ªán
- **Single-threaded**: Ch·∫°y tr√™n m·ªôt thread ch√≠nh
- **Cross-platform**: Ho·∫°t ƒë·ªông tr√™n nhi·ªÅu h·ªá ƒëi·ªÅu h√†nh

### 2. V8 Engine v√† Event Loop

**V8 Engine**: L√† JavaScript engine m√£ ngu·ªìn m·ªü c·ªßa Google, bi√™n d·ªãch JavaScript th√†nh machine code.

**Event Loop**: C∆° ch·∫ø x·ª≠ l√Ω c√°c s·ª± ki·ªán v√† callback functions trong Node.js.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îå‚îÄ>‚îÇ           timers          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚îÇ     pending callbacks     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚îÇ       idle, prepare       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚îÇ           poll            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚îÇ           check           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îî‚îÄ‚îÄ‚î§      close callbacks      ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3. Global Objects

Node.js cung c·∫•p m·ªôt s·ªë global objects:

- `global`: ƒê·ªëi t∆∞·ª£ng global (t∆∞∆°ng t·ª± `window` trong browser)
- `process`: Th√¥ng tin v·ªÅ process hi·ªán t·∫°i
- `console`: ƒê·ªÉ in ra console
- `setTimeout`, `setInterval`: Timer functions
- `__dirname`: ƒê∆∞·ªùng d·∫´n th∆∞ m·ª•c hi·ªán t·∫°i
- `__filename`: ƒê∆∞·ªùng d·∫´n file hi·ªán t·∫°i

### 4. Callback Pattern

Callback l√† m·ªôt function ƒë∆∞·ª£c truy·ªÅn v√†o m·ªôt function kh√°c v√† ƒë∆∞·ª£c g·ªçi khi t√°c v·ª• ho√†n th√†nh.

```javascript
// Callback pattern
function asyncOperation(callback) {
  setTimeout(() => {
    callback(null, 'K·∫øt qu·∫£ th√†nh c√¥ng');
  }, 1000);
}

asyncOperation((error, result) => {
  if (error) {
    console.error('L·ªói:', error);
  } else {
    console.log('K·∫øt qu·∫£:', result);
  }
});
```

## üíª V√≠ D·ª• Th·ª±c T·∫ø

### V√≠ d·ª• 1: Hello World
```javascript
// hello.js
console.log('Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi Node.js!');
console.log('Node.js version:', process.version);
console.log('Platform:', process.platform);
```

### V√≠ d·ª• 2: L√†m vi·ªác v·ªõi Process
```javascript
// process-info.js
console.log('=== TH√îNG TIN PROCESS ===');
console.log('Process ID:', process.pid);
console.log('Node Version:', process.version);
console.log('Platform:', process.platform);
console.log('Working Directory:', process.cwd());
console.log('Environment:', process.env.NODE_ENV || 'development');

// L·∫Øng nghe s·ª± ki·ªán tho√°t
process.on('exit', (code) => {
  console.log(`Process tho√°t v·ªõi m√£: ${code}`);
});

// L·∫Øng nghe SIGINT (Ctrl+C)
process.on('SIGINT', () => {
  console.log('ƒê√£ nh·∫≠n SIGINT. Tho√°t gracefully...');
  process.exit(0);
});
```

### V√≠ d·ª• 3: Event Loop Demo
```javascript
// event-loop.js
console.log('B·∫Øt ƒë·∫ßu');

// Immediate
setImmediate(() => {
  console.log('setImmediate');
});

// Timeout
setTimeout(() => {
  console.log('setTimeout');
}, 0);

// Next tick
process.nextTick(() => {
  console.log('nextTick');
});

// Microtask
Promise.resolve().then(() => {
  console.log('Promise');
});

console.log('K·∫øt th√∫c');
```

## üöÄ B√†i T·∫≠p Th·ª±c H√†nh

### B√†i T·∫≠p 1: System Information (C∆° b·∫£n)
T·∫°o file `system-info.js` hi·ªÉn th·ªã th√¥ng tin h·ªá th·ªëng:

**Y√™u c·∫ßu:**
- Hi·ªÉn th·ªã th√¥ng tin CPU
- Hi·ªÉn th·ªã th√¥ng tin memory
- Hi·ªÉn th·ªã th√¥ng tin h·ªá ƒëi·ªÅu h√†nh
- Hi·ªÉn th·ªã th·ªùi gian uptime

**G·ª£i √Ω:**
```javascript
const os = require('os');

// S·ª≠ d·ª•ng c√°c methods c·ªßa os module
console.log('CPU:', os.cpus());
console.log('Memory:', os.totalmem(), os.freemem());
// ... th√™m c√°c th√¥ng tin kh√°c
```

### B√†i T·∫≠p 2: Command Line Calculator (Trung b√¨nh)
T·∫°o file `calculator.js` th·ª±c hi·ªán t√≠nh to√°n t·ª´ command line:

**Y√™u c·∫ßu:**
- Nh·∫≠n input t·ª´ command line arguments
- H·ªó tr·ª£ c√°c ph√©p t√≠nh: +, -, *, /
- X·ª≠ l√Ω l·ªói khi input kh√¥ng h·ª£p l·ªá
- Hi·ªÉn th·ªã k·∫øt qu·∫£ ho·∫∑c th√¥ng b√°o l·ªói

**C√°ch ch·∫°y:**
```bash
node calculator.js 10 + 5
node calculator.js 20 / 4
```

### B√†i T·∫≠p 3: Simple Timer (N√¢ng cao)
T·∫°o file `timer.js` v·ªõi c√°c ch·ª©c nƒÉng:

**Y√™u c·∫ßu:**
- ƒê·∫øm ng∆∞·ª£c t·ª´ s·ªë gi√¢y ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh
- Hi·ªÉn th·ªã ti·∫øn tr√¨nh ƒë·∫øm ng∆∞·ª£c
- Th√¥ng b√°o khi ho√†n th√†nh
- C√≥ th·ªÉ d·ª´ng timer b·∫±ng Ctrl+C

**C√°ch ch·∫°y:**
```bash
node timer.js 10  # ƒê·∫øm ng∆∞·ª£c t·ª´ 10 gi√¢y
```

## üìù Gi·∫£i Ph√°p M·∫´u

### Gi·∫£i ph√°p B√†i T·∫≠p 1:
```javascript
// system-info.js
const os = require('os');

console.log('=== TH√îNG TIN H·ªÜ TH·ªêNG ===');
console.log('H·ªá ƒëi·ªÅu h√†nh:', os.type(), os.release());
console.log('Ki·∫øn tr√∫c:', os.arch());
console.log('Hostname:', os.hostname());
console.log('CPU cores:', os.cpus().length);
console.log('Total Memory:', (os.totalmem() / 1024 / 1024 / 1024).toFixed(2), 'GB');
console.log('Free Memory:', (os.freemem() / 1024 / 1024 / 1024).toFixed(2), 'GB');
console.log('Uptime:', Math.floor(os.uptime() / 3600), 'gi·ªù');
```

## üéØ Ki·ªÉm Tra Ki·∫øn Th·ª©c

### C√¢u H·ªèi:
1. Node.js kh√°c g√¨ v·ªõi JavaScript ch·∫°y tr√™n browser?
2. Event Loop ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o?
3. Callback pattern c√≥ ∆∞u nh∆∞·ª£c ƒëi·ªÉm g√¨?
4. Global objects n√†o th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng nh·∫•t?

### ƒê√°p √Ån:
1. Node.js ch·∫°y server-side, c√≥ th·ªÉ truy c·∫≠p file system, kh√¥ng c√≥ DOM/BOM
2. Event Loop x·ª≠ l√Ω callbacks theo th·ª© t·ª± ∆∞u ti√™n: nextTick > Promise > setTimeout > setImmediate
3. ∆Øu ƒëi·ªÉm: ƒê∆°n gi·∫£n, kh√¥ng b·ªã block. Nh∆∞·ª£c ƒëi·ªÉm: Callback hell, kh√≥ debug
4. `process`, `console`, `__dirname`, `__filename`, `global`

## üìö T√†i Li·ªáu Tham Kh·∫£o

- [Node.js Official Documentation](https://nodejs.org/docs/)
- [Understanding Event Loop](https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/)
- [Node.js Globals](https://nodejs.org/api/globals.html)

## ‚û°Ô∏è B√†i Ti·∫øp Theo

Sau khi ho√†n th√†nh b√†i n√†y, chuy·ªÉn sang **B√†i 2: NPM v√† Modules** ƒë·ªÉ h·ªçc v·ªÅ package management v√† module system.

---

‚è∞ **Th·ªùi gian ho√†n th√†nh d·ª± ki·∫øn**: 3-4 ng√†y
üéØ **M·ª©c ƒë·ªô**: C∆° b·∫£n
üìã **Checklist ho√†n th√†nh**:
- [ ] ƒê·ªçc v√† hi·ªÉu l√Ω thuy·∫øt
- [ ] Ch·∫°y th·ª≠ c√°c v√≠ d·ª•
- [ ] Ho√†n th√†nh 3 b√†i t·∫≠p
- [ ] Tr·∫£ l·ªùi c√¢u h·ªèi ki·ªÉm tra 
